---
description: 
globs: 
alwaysApply: false
---
è¯·è®°ä½ï¼Œä»£ç æ˜¯å†™ç»™äººçœ‹çš„ï¼Œåªæ˜¯æœºå™¨æ°å¥½å¯ä»¥è¿è¡Œ

## ğŸ¯ æ ¸å¿ƒåŸåˆ™
- å¯è¯»æ€§ > ç®€æ´æ€§
- å¯ç»´æŠ¤æ€§ > æ€§èƒ½ï¼ˆé™¤éæ€§èƒ½å…³é”®ï¼‰
- ä¸€è‡´æ€§ > ä¸ªäººåå¥½
- Clean Architecture åˆ†å±‚ä¸¥æ ¼éµå¾ª

## ğŸ›ï¸ Clean Architecture æ¶æ„è§„èŒƒ

### åˆ†å±‚ç»“æ„
```
app/src/main/java/com/example/webrtc/
â”œâ”€â”€ domain/                 # ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆæ ¸å¿ƒå±‚ï¼‰
â”‚   â”œâ”€â”€ model/             # ä¸šåŠ¡å®ä½“
â”‚   â”œâ”€â”€ repository/        # ä»“åº“æ¥å£
â”‚   â”œâ”€â”€ usecase/          # ç”¨ä¾‹/ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ service/          # é¢†åŸŸæœåŠ¡æ¥å£
â”œâ”€â”€ data/                  # æ•°æ®å±‚
â”‚   â”œâ”€â”€ repository/        # ä»“åº“å®ç°
â”‚   â”œâ”€â”€ source/           # æ•°æ®æº
â”‚   â”‚   â”œâ”€â”€ local/        # æœ¬åœ°æ•°æ®æºï¼ˆRoomï¼‰
â”‚   â”‚   â””â”€â”€ remote/       # è¿œç¨‹æ•°æ®æºï¼ˆAPIï¼‰
â”‚   â””â”€â”€ mapper/           # æ•°æ®è½¬æ¢å™¨
â”œâ”€â”€ ui/                    # è¡¨ç°å±‚
â”‚   â”œâ”€â”€ screens/          # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ auth/         # è®¤è¯é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ components/  # è®¤è¯é¡µé¢ä¸“ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ patrol/       # å·¡æ£€é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ components/  # å·¡æ£€é¡µé¢ä¸“ç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ...           # å…¶ä»–é¡µé¢æ¨¡å—
â”‚   â”œâ”€â”€ components/       # å…¨å±€å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ viewmodel/        # ViewModel
â”‚   â”œâ”€â”€ theme/            # ä¸»é¢˜æ ·å¼
â”‚   â””â”€â”€ navigation/       # å¯¼èˆª
â”œâ”€â”€ di/                    # ä¾èµ–æ³¨å…¥
â”œâ”€â”€ service/              # Android æœåŠ¡
â”œâ”€â”€ protocol/             # åè®®å¤„ç†
â””â”€â”€ util/                 # å·¥å…·ç±»
```

### ä¾èµ–è§„åˆ™ âš ï¸
```kotlin
// âœ… å…è®¸çš„ä¾èµ–æ–¹å‘
UI Layer â†’ Domain Layer
Data Layer â†’ Domain Layer
Domain Layer â†’ ä¸ä¾èµ–ä»»ä½•å±‚

// âŒ ç¦æ­¢çš„ä¾èµ–
Domain Layer â†’ UI Layer     // ç»å¯¹ç¦æ­¢
Domain Layer â†’ Data Layer   // ç»å¯¹ç¦æ­¢
UI Layer â†’ Data Layer      // åº”é€šè¿‡ Domain å±‚
```

### Domain å±‚è§„èŒƒ
```kotlin
// âœ… çº¯ Kotlin ç±»ï¼Œæ—  Android ä¾èµ–
data class PrecisionRecord(
    val id: String,
    val title: String,
    val createdAt: Long,
    val audioFilePath: String?
)

// âœ… ä»“åº“æ¥å£å®šä¹‰
interface PrecisionRecordRepository {
    suspend fun getAllRecords(): List<PrecisionRecord>
    suspend fun insertRecord(record: PrecisionRecord)
    suspend fun deleteRecord(id: String)
}

// âœ… ç”¨ä¾‹å°è£…ä¸šåŠ¡é€»è¾‘
class GetPrecisionRecordsUseCase @Inject constructor(
    private val repository: PrecisionRecordRepository
) {
    suspend operator fun invoke(): List<PrecisionRecord> {
        return repository.getAllRecords()
    }
}
```

### Data å±‚è§„èŒƒ
```kotlin
// âœ… å®ä½“ç±»ï¼ˆRoom Entityï¼‰
@Entity(tableName = "precision_records")
data class PrecisionRecordEntity(
    @PrimaryKey val id: String,
    val title: String,
    val createdAt: Long,
    val audioFilePath: String?
)

// âœ… ä»“åº“å®ç°
class PrecisionRecordRepositoryImpl @Inject constructor(
    private val dao: PrecisionDao
) : PrecisionRecordRepository {
    
    override suspend fun getAllRecords(): List<PrecisionRecord> {
        return dao.getAllRecords().map { it.toDomainModel() }
    }
}

// âœ… æ•°æ®è½¬æ¢æ‰©å±•å‡½æ•°
fun PrecisionRecordEntity.toDomainModel(): PrecisionRecord {
    return PrecisionRecord(
        id = id,
        title = title,
        createdAt = createdAt,
        audioFilePath = audioFilePath
    )
}
```

### UI å±‚è§„èŒƒ
```kotlin
// âœ… ViewModel åªä¾èµ– Domain å±‚
@HiltViewModel
class PrecisionMeasureViewModel @Inject constructor(
    private val getPrecisionRecordsUseCase: GetPrecisionRecordsUseCase,
    private val deletePrecisionRecordUseCase: DeletePrecisionRecordUseCase
) : ViewModel() {
    
    private val _uiState = MutableStateFlow(PrecisionMeasureUiState())
    val uiState: StateFlow<PrecisionMeasureUiState> = _uiState.asStateFlow()
    
    fun loadRecords() {
        viewModelScope.launch {
            try {
                val records = getPrecisionRecordsUseCase()
                _uiState.update { it.copy(records = records) }
            } catch (e: Exception) {
                _uiState.update { it.copy(error = e.message) }
            }
        }
    }
}
```

## â­ CRITICAL: Import ç®¡ç†è§„èŒƒ (é›¶å®¹å¿)

### ç»å¯¹ç¦æ­¢ä½¿ç”¨å®Œæ•´åŒ…å
```kotlin
// âŒ ä¸¥é‡è¿è§„ - ç«‹å³ä¿®å¤
val record = com.otq.leakdetector.domain.model.PrecisionRecord(...)
val data = com.otq.leakdetector.util.FirmwareUtils.hexToBin(file)

// âœ… æ­£ç¡®åšæ³•
import com.otq.leakdetector.domain.model.PrecisionRecord
import com.otq.leakdetector.util.FirmwareUtils

val record = PrecisionRecord(...)
val data = FirmwareUtils.hexToBin(file)
```

### Import ç»„ç»‡é¡ºåº
```kotlin
// 1. Android ç³»ç»Ÿåº“
import android.content.Context
import androidx.compose.runtime.*

// 2. ç¬¬ä¸‰æ–¹åº“  
import dagger.hilt.android.lifecycle.HiltViewModel
import kotlinx.coroutines.flow.StateFlow

// 3. é¡¹ç›®å†…éƒ¨åŒ…ï¼ˆå­—æ¯é¡ºåºï¼‰
import com.otq.leakdetector.domain.model.AudioFile
import com.otq.leakdetector.ui.components.BluetoothStatusBar
```

## ğŸ—ï¸ ViewModel çŠ¶æ€ç®¡ç†æ ‡å‡†

```kotlin
@HiltViewModel
class MyViewModel @Inject constructor(
    private val repository: MyRepository
) : ViewModel() {
    
    // âœ… æ ‡å‡†æ¨¡å¼
    private val _uiState = MutableStateFlow(MyUiState())
    val uiState: StateFlow<MyUiState> = _uiState.asStateFlow()
    
    // âœ… çŠ¶æ€æ›´æ–°
    fun updateData(newData: String) {
        _uiState.update { it.copy(data = newData) }
    }
    
    // âœ… å¼‚å¸¸å¤„ç†
    fun loadData() {
        viewModelScope.launch {
            try {
                val data = repository.getData()
                _uiState.update { it.copy(data = data, error = null) }
            } catch (e: Exception) {
                Log.e(TAG, "Failed to load data: ${e.message}", e)
                _uiState.update { it.copy(error = e.message) }
            }
        }
    }
    
    // âœ… èµ„æºæ¸…ç†
    override fun onCleared() {
        super.onCleared()
        // æ¸…ç†èµ„æºå’Œå…¨å±€çŠ¶æ€
    }
    
    companion object {
        private const val TAG = "MyViewModel"
    }
}
```

## ğŸ§© ç»„ä»¶ç»„ç»‡è§„èŒƒ (å¼ºåˆ¶éµå¾ª)

### ç»„ä»¶åˆ†ç±»å’Œä½ç½®
```kotlin
// âœ… å…¨å±€å¯å¤ç”¨ç»„ä»¶ - æ”¾åœ¨ ui/components/
ui/components/
â”œâ”€â”€ BluetoothStatusBar.kt     # è“ç‰™çŠ¶æ€æ ï¼ˆå¤šé¡µé¢ä½¿ç”¨ï¼‰
â”œâ”€â”€ AudioPlayerBar.kt         # éŸ³é¢‘æ’­æ”¾å™¨ï¼ˆå¤šé¡µé¢ä½¿ç”¨ï¼‰
â”œâ”€â”€ DeleteConfirmDialog.kt    # åˆ é™¤ç¡®è®¤å¯¹è¯æ¡†ï¼ˆé€šç”¨ï¼‰
â””â”€â”€ LoadingIndicator.kt       # åŠ è½½æŒ‡ç¤ºå™¨ï¼ˆé€šç”¨ï¼‰

// âœ… é¡µé¢ä¸“ç”¨ç»„ä»¶ - æ”¾åœ¨å¯¹åº”é¡µé¢çš„ components/ å­ç›®å½•
ui/screens/patrol/
â”œâ”€â”€ PatrolDetailScreen.kt     # å·¡æ£€è¯¦æƒ…é¡µé¢
â”œâ”€â”€ PatrolAddScreen.kt        # å·¡æ£€æ–°å¢é¡µé¢
â””â”€â”€ components/               # å·¡æ£€é¡µé¢ä¸“ç”¨ç»„ä»¶
    â”œâ”€â”€ MapFilterComponent.kt     # åœ°å›¾ç­›é€‰ç»„ä»¶ï¼ˆä»…å·¡æ£€é¡µé¢ä½¿ç”¨ï¼‰
    â”œâ”€â”€ PatrolPointCard.kt        # å·¡æ£€ç‚¹ä½å¡ç‰‡ï¼ˆä»…å·¡æ£€é¡µé¢ä½¿ç”¨ï¼‰
    â””â”€â”€ PatrolSummaryPanel.kt     # å·¡æ£€æ±‡æ€»é¢æ¿ï¼ˆä»…å·¡æ£€é¡µé¢ä½¿ç”¨ï¼‰

ui/screens/precision/
â”œâ”€â”€ PrecisionMeasureScreen.kt
â””â”€â”€ components/
    â”œâ”€â”€ MeasurementPanel.kt       # æµ‹é‡é¢æ¿ï¼ˆä»…ç²¾æµ‹é¡µé¢ä½¿ç”¨ï¼‰
    â””â”€â”€ ResultChart.kt            # ç»“æœå›¾è¡¨ï¼ˆä»…ç²¾æµ‹é¡µé¢ä½¿ç”¨ï¼‰
```

### ç»„ä»¶å‘½åå’ŒèŒè´£
```kotlin
// âœ… å…¨å±€ç»„ä»¶ï¼šåŠŸèƒ½æ€§å‘½åï¼ŒèŒè´£å•ä¸€
@Composable
fun BluetoothStatusBar(
    onGoConnect: () -> Unit
) { /* è“ç‰™è¿æ¥çŠ¶æ€æ˜¾ç¤ºå’Œæ“ä½œ */ }

// âœ… é¡µé¢ä¸“ç”¨ç»„ä»¶ï¼šä¸šåŠ¡æ€§å‘½åï¼Œä¸é¡µé¢å¼ºç›¸å…³
@Composable
fun MapFilterComponent(
    showBubble: Boolean,
    filterType: PointFilterType,
    onShowBubbleChange: (Boolean) -> Unit,
    onFilterTypeChange: (PointFilterType) -> Unit
) { /* åœ°å›¾ç­›é€‰åŠŸèƒ½ï¼Œä»…ç”¨äºå·¡æ£€è¯¦æƒ…é¡µ */ }
```

### ç»„ä»¶ç§»åŠ¨è§„åˆ™
```kotlin
// ğŸ”„ å½“ç»„ä»¶è¢«å¤šä¸ªé¡µé¢ä½¿ç”¨æ—¶ï¼Œæå‡åˆ°å…¨å±€
// ä» ui/screens/patrol/components/CommonButton.kt
// ç§»åŠ¨åˆ° ui/components/CommonButton.kt

// ğŸ”„ å½“å…¨å±€ç»„ä»¶åªè¢«å•ä¸ªé¡µé¢ä½¿ç”¨æ—¶ï¼Œé™çº§åˆ°é¡µé¢ä¸“ç”¨
// ä» ui/components/PatrolSpecificDialog.kt  
// ç§»åŠ¨åˆ° ui/screens/patrol/components/PatrolSpecificDialog.kt
```

### è¿è§„æ£€æŸ¥
```kotlin
// âŒ é”™è¯¯ï¼šé¡µé¢ä¸“ç”¨ç»„ä»¶æ”¾åœ¨å…¨å±€ä½ç½®
ui/components/PatrolMapFilter.kt  // åº”è¯¥åœ¨ ui/screens/patrol/components/

// âŒ é”™è¯¯ï¼šå…¨å±€ç»„ä»¶æ”¾åœ¨é¡µé¢ç›®å½•
ui/screens/patrol/components/LoadingSpinner.kt  // åº”è¯¥åœ¨ ui/components/

// âœ… æ­£ç¡®ï¼šç»„ä»¶ä½ç½®ä¸ä½¿ç”¨èŒƒå›´åŒ¹é…
ui/components/LoadingSpinner.kt                    # å¤šé¡µé¢ä½¿ç”¨
ui/screens/patrol/components/PatrolMapFilter.kt    # ä»…å·¡æ£€é¡µé¢ä½¿ç”¨
```

## ğŸ¨ Composable å‡½æ•°è§„èŒƒ

```kotlin
@Composable
fun MyComponent(
    // 1. æ•°æ®å‚æ•°
    title: String,
    items: List<Item>,
    
    // 2. é…ç½®å‚æ•°
    modifier: Modifier = Modifier,
    enabled: Boolean = true,
    
    // 3. å›è°ƒå‡½æ•°
    onItemClick: (Item) -> Unit,
    onLongPress: ((Item) -> Unit)? = null
) {
    // âœ… çŠ¶æ€æ”¶é›†
    val uiState by viewModel.uiState.collectAsState()
    
    // âœ… æ€§èƒ½ä¼˜åŒ–
    val expensiveValue = remember(key1, key2) {
        expensiveCalculation(key1, key2)
    }
    
    LazyColumn(modifier = modifier) {
        items(
            items = items,
            key = { it.id } // âœ… ç¨³å®šçš„ key
        ) { item ->
            ItemComponent(item = item)
        }
    }
}
```

## ğŸ“¦ ä¾èµ–ç®¡ç†è§„èŒƒ (å¼ºåˆ¶éµå¾ª)

### libs.versions.toml ç‰ˆæœ¬ç®¡ç†
```toml
# âœ… æ­£ç¡®ï¼šæ‰€æœ‰ä¾èµ–ç‰ˆæœ¬ç»Ÿä¸€åœ¨ [versions] ä¸­ç®¡ç†
[versions]
datastore = "1.0.0"
room = "2.7.1"
retrofit = "2.9.0"

# âœ… æ­£ç¡®ï¼šåœ¨ [libraries] ä¸­å¼•ç”¨ç‰ˆæœ¬
[libraries]
androidx-datastore-preferences = { group = "androidx.datastore", name = "datastore-preferences", version.ref = "datastore" }
androidx-room-runtime = { group = "androidx.room", name = "room-runtime", version.ref = "room" }
```

### build.gradle.kts ä¾èµ–å¼•ç”¨
```kotlin
// âœ… æ­£ç¡®ï¼šä½¿ç”¨ libs å¼•ç”¨
implementation(libs.androidx.datastore.preferences)
implementation(libs.androidx.room.runtime)
implementation(libs.retrofit)

// âŒ é”™è¯¯ï¼šç¡¬ç¼–ç ç‰ˆæœ¬å·
implementation("androidx.datastore:datastore-preferences:1.0.0")
implementation("androidx.room:room-runtime:2.7.1")
```

### ä¾èµ–æ·»åŠ æµç¨‹ (å¿…é¡»éµå¾ª)
1. **ç¬¬ä¸€æ­¥**: åœ¨ `gradle/libs.versions.toml` çš„ `[versions]` ä¸­æ·»åŠ ç‰ˆæœ¬å·
2. **ç¬¬äºŒæ­¥**: åœ¨ `[libraries]` ä¸­å®šä¹‰ä¾èµ–ï¼Œä½¿ç”¨ `version.ref` å¼•ç”¨ç‰ˆæœ¬
3. **ç¬¬ä¸‰æ­¥**: åœ¨ `app/build.gradle.kts` ä¸­ä½¿ç”¨ `libs.xxx` å¼•ç”¨

### è¿è§„ç¤ºä¾‹ä¸ä¿®å¤
```kotlin
// âŒ ä¸¥é‡è¿è§„ - ç«‹å³ä¿®å¤
implementation("androidx.datastore:datastore-preferences:1.0.0")
implementation("com.google.code.gson:gson:2.10.1")

// âœ… æ­£ç¡®åšæ³•
// 1. åœ¨ libs.versions.toml ä¸­æ·»åŠ ï¼š
//    [versions]
//    datastore = "1.0.0"
//    gson = "2.10.1"
//    
//    [libraries]
//    androidx-datastore-preferences = { group = "androidx.datastore", name = "datastore-preferences", version.ref = "datastore" }
//    gson = { group = "com.google.code.gson", name = "gson", version.ref = "gson" }

// 2. åœ¨ build.gradle.kts ä¸­ä½¿ç”¨ï¼š
implementation(libs.androidx.datastore.preferences)
implementation(libs.gson)
```

### ğŸš¨ ä¾èµ–ç®¡ç†æ£€æŸ¥æ¸…å•
- [ ] **æ‰€æœ‰ç‰ˆæœ¬å·åœ¨ libs.versions.toml ä¸­å®šä¹‰**
- [ ] **build.gradle.kts ä¸­ä½¿ç”¨ libs.xxx å¼•ç”¨**
- [ ] **æ— ç¡¬ç¼–ç ç‰ˆæœ¬å·**
- [ ] **ä¾èµ–å‘½åéµå¾ªé¡¹ç›®çº¦å®š**

## ğŸ”§ ä¾èµ–æ³¨å…¥è§„èŒƒ

### Hilt æ¨¡å—ç»„ç»‡
```kotlin
// âœ… æ•°æ®åº“æ¨¡å—
@Module
@InstallIn(SingletonComponent::class)
object DatabaseModule {
    
    @Provides
    @Singleton
    fun provideDatabase(@ApplicationContext context: Context): AppDatabase =
        Room.databaseBuilder(context, AppDatabase::class.java, "app_db").build()
    
    @Provides
    fun provideDao(db: AppDatabase): MyDao = db.myDao()
}

// âœ… ä»“åº“æ¨¡å—
@Module
@InstallIn(SingletonComponent::class)
object RepositoryModule {
    
    @Provides
    @Singleton
    fun provideRepository(dao: MyDao): MyRepository = MyRepositoryImpl(dao)
}

// âœ… ç”¨ä¾‹æ¨¡å—
@Module
@InstallIn(ViewModelComponent::class)
object UseCaseModule {
    
    @Provides
    fun provideGetRecordsUseCase(
        repository: MyRepository
    ): GetRecordsUseCase = GetRecordsUseCase(repository)
}
```

### ä½œç”¨åŸŸè§„èŒƒ
```kotlin
// âœ… å•ä¾‹ï¼šæ•°æ®åº“ã€ä»“åº“ã€æœåŠ¡
@Singleton
class MyRepositoryImpl

// âœ… ViewModel ä½œç”¨åŸŸï¼šç”¨ä¾‹
@ViewModelScoped  
class GetRecordsUseCase

// âœ… Activity ä½œç”¨åŸŸï¼šActivity ç›¸å…³æœåŠ¡
@ActivityScoped
class NavigationService
```

## ğŸ“ æ—¥å¿—è§„èŒƒ

```kotlin
companion object {
    private const val TAG = "ClassName"
}

// ä½¿ç”¨åˆé€‚çš„çº§åˆ«
Log.d(TAG, "Debug info: $info")        // è°ƒè¯•
Log.i(TAG, "Important event: $event")  // é‡è¦äº‹ä»¶
Log.w(TAG, "Warning: $warning")        // è­¦å‘Š
Log.e(TAG, "Error: ${e.message}", e)   // é”™è¯¯ï¼ˆå«å¼‚å¸¸ï¼‰
```

## âœ… ä»£ç å®¡æŸ¥æ£€æŸ¥æ¸…å•

### ğŸš¨ å¼ºåˆ¶æ£€æŸ¥ï¼ˆå¿…é¡»é€šè¿‡ï¼‰
- [ ] **æ— å®Œæ•´åŒ…åä½¿ç”¨** (com.otq.leakdetector.*.*)
- [ ] **Import è¯­å¥æ­£ç¡®æ·»åŠ **
- [ ] **ä¾èµ–ç®¡ç†è§„èŒƒéµå¾ª** (ä½¿ç”¨ libs.xxx å¼•ç”¨)
- [ ] **ç»„ä»¶ä½ç½®æ­£ç¡®** (é¡µé¢ä¸“ç”¨ç»„ä»¶åœ¨å¯¹åº”é¡µé¢ç›®å½•ä¸‹)
- [ ] **StateFlow æ¨¡å¼æ­£ç¡®ä½¿ç”¨**
- [ ] **èµ„æºåœ¨ onCleared() ä¸­æ¸…ç†**
- [ ] **å¼‚å¸¸ç”¨ try-catch å¤„ç†**
- [ ] **æ—¥å¿—çº§åˆ«åˆé€‚**
- [ ] **Composable å‚æ•°é¡ºåºæ­£ç¡®**

### ğŸ›ï¸ æ¶æ„æ£€æŸ¥ï¼ˆå¿…é¡»é€šè¿‡ï¼‰
- [ ] **Domain å±‚æ—  Android ä¾èµ–**
- [ ] **UI å±‚ä¸ç›´æ¥è°ƒç”¨ Data å±‚**
- [ ] **ä¾èµ–æ–¹å‘æ­£ç¡®** (UIâ†’Domainâ†Data)
- [ ] **ç”¨ä¾‹å°è£…ä¸šåŠ¡é€»è¾‘**
- [ ] **ä»“åº“æ¥å£åœ¨ Domain å±‚å®šä¹‰**
- [ ] **æ•°æ®è½¬æ¢åœ¨ Data å±‚å®Œæˆ**
- [ ] **ViewModel åªä¾èµ– Domain å±‚**

### âš¡ æ€§èƒ½æ£€æŸ¥
- [ ] LazyList ä½¿ç”¨ç¨³å®š key
- [ ] æ˜‚è´µè®¡ç®—ä½¿ç”¨ remember()
- [ ] é¿å…ä¸å¿…è¦é‡ç»„
- [ ] åç¨‹ä½¿ç”¨åˆé€‚ Dispatcher

### ğŸ”„ è‡ªåŠ¨æ‹’ç»æ ‡å‡†
- âŒ ä»£ç ä¸­ä½¿ç”¨ "com.otq.leakdetector."
- âŒ ç¼ºå°‘å¿…è¦çš„ import è¯­å¥
- âŒ ç¡¬ç¼–ç ä¾èµ–ç‰ˆæœ¬å· (ä¸ä½¿ç”¨ libs.xxx)
- âŒ ç»„ä»¶ä½ç½®é”™è¯¯ (é¡µé¢ä¸“ç”¨ç»„ä»¶æ”¾åœ¨å…¨å±€ç›®å½•)
- âŒ å†…å­˜æ³„æ¼æˆ–èµ„æºæ³„æ¼
- âŒ æœªå¤„ç†çš„å¼‚å¸¸
- âŒ é”™è¯¯çš„çŠ¶æ€ç®¡ç†æ¨¡å¼
- âŒ è¿åæ¶æ„åˆ†å±‚ä¾èµ–è§„åˆ™
- âŒ Domain å±‚åŒ…å« Android ä¾èµ–
- âŒ UI å±‚ç›´æ¥è°ƒç”¨ Data å±‚

## ğŸ› ï¸ å·¥å…·é…ç½®å»ºè®®

### IDE è®¾ç½®
- å¯ç”¨ "Optimize imports on the fly"
- è®¾ç½® import è‡ªåŠ¨æ’åº
- ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–

### é™æ€åˆ†æ
- ä½¿ç”¨ ktlint æ£€æŸ¥ä»£ç é£æ ¼
- ä½¿ç”¨ detekt åˆ†æä»£ç è´¨é‡

## ğŸ¯ è¿è§„å¤„ç†

### ä¸¥é‡è¿è§„ï¼ˆé˜»æ­¢åˆå¹¶ï¼‰
- ä½¿ç”¨å®Œæ•´åŒ…åè°ƒç”¨
- å†…å­˜æ³„æ¼
- æœªå¤„ç†å¼‚å¸¸
- ç”Ÿå‘½å‘¨æœŸç®¡ç†é”™è¯¯

### ä¸€èˆ¬è¿è§„ï¼ˆå»ºè®®ä¿®å¤ï¼‰
- Import é¡ºåºä¸è§„èŒƒ
- æ—¥å¿—çº§åˆ«ä¸å½“
- å‘½åä¸è§„èŒƒ

---

## ğŸ“‹ å¿«é€Ÿå‚è€ƒ

### å¸¸è§è¿è§„ä¿®å¤
```kotlin
// âŒ é”™è¯¯
val utils = com.otq.leakdetector.util.FirmwareUtils
val state = com.otq.leakdetector.domain.model.OtaState.Idle

// âœ… æ­£ç¡®
import com.otq.leakdetector.util.FirmwareUtils
import com.otq.leakdetector.domain.model.OtaState

val utils = FirmwareUtils
val state = OtaState.Idle
```

### å…¨å±€çŠ¶æ€ç®¡ç†
```kotlin
companion object {
    private var _globalState = mutableStateOf(false)
    val globalState: Boolean get() = _globalState.value
    
    private fun updateGlobalState(isActive: Boolean) {
        _globalState.value = isActive
    }
}
```

### æ¶æ„è¿è§„ä¿®å¤
```kotlin
// âŒ é”™è¯¯ï¼šViewModel ç›´æ¥è°ƒç”¨ Data å±‚
class MyViewModel @Inject constructor(
    private val dao: MyDao  // è¿è§„ï¼
)

// âœ… æ­£ç¡®ï¼šé€šè¿‡ Domain å±‚
class MyViewModel @Inject constructor(
    private val getDataUseCase: GetDataUseCase  // æ­£ç¡®ï¼
)

// âŒ é”™è¯¯ï¼šDomain å±‚åŒ…å« Android ä¾èµ–
import android.content.Context  // è¿è§„ï¼
class MyUseCase(private val context: Context)

// âœ… æ­£ç¡®ï¼šDomain å±‚çº¯ Kotlin
class MyUseCase @Inject constructor(
    private val repository: MyRepository  // æ­£ç¡®ï¼
)
```

### æ•°æ®æµå‘è§„èŒƒ
```kotlin
// âœ… æ­£ç¡®çš„æ•°æ®æµå‘
UI (Composable) 
  â†“ collectAsState()
ViewModel 
  â†“ invoke()
UseCase 
  â†“ method call
Repository Interface (Domain)
  â†“ implementation
Repository Impl (Data)
  â†“ query
DAO/API
```

---

**âš ï¸ é‡è¦æé†’**: è¿™äº›è§„èŒƒæ˜¯å¼ºåˆ¶æ€§çš„ï¼Œç‰¹åˆ«æ˜¯ Import ç®¡ç†è§„åˆ™ã€‚è¿åå°†å¯¼è‡´ä»£ç å®¡æŸ¥è¢«æ‹’ç»ã€‚



**ğŸ”„ çµæ´»æ€§è¯´æ˜**: åœ¨éµå¾ªè¿™äº›è´¨é‡æ ‡å‡†çš„åŒæ—¶ï¼Œè¯·é€‚åº”ç°æœ‰é¡¹ç›®ç»“æ„ï¼Œä¿æŒæ¶æ„ä¸€è‡´æ€§ã€‚